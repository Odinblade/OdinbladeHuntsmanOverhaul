Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
CharacterUsedSkill(_Character, _SkillId, _, _)
AND
HasActiveStatus(_Character, "OdinHUN_EXPERTHUNTER", 1)
AND
DB_OBHUN_GrenadeSkill(_SkillId, _ItemTemplate)
AND
StringConcatenate("[OdinHUN:Story] Expert Hunter grenade proc: ", _SkillId, _DebugMsg)
THEN
CharacterStatusText(_Character, "Grenade refunded!");
ItemTemplateAddTo(_ItemTemplate, _Character, 1);
NRD_DebugLog(_DebugMsg);

// IF
// CharacterUsedSkill(_Character, _SkillId, _, _)
// AND
// HasActiveStatus(_Character, "OdinHUN_EXPERTHUNTER", 1)
// AND
// DB_OBHUN_GrenadeSkill(_SkillId, _ItemTemplate)
// AND
// StringConcatenate("[OdinHUN:Story] Expert Hunter arrow proc: ", _SkillId, _DebugMsg)
// THEN
// CharacterStatusText(_Character, "Grenade refunded!");
// ItemTemplateAddTo(_ItemTemplate, _Character, 1);
// NRD_DebugLog(_DebugMsg);

IF
NRD_OnHit(_Target, _Dealer, _, _HitHandle)
AND
HasActiveStatus(_Dealer, "OdinHUN_EXPERTHUNTER", 1)
AND
NRD_StatusGetString(_Target, _HitHandle, "SkillId", _SkillId)
// AND
// _SkillID == "Projectile_ArrowSpray_-1"
AND
DB_OBHUN_CraftedArrowsSkill(_SkillId)
AND
DB_OBHUN_DamageType(_PreDamageType)
AND
NRD_HitStatusGetDamage(_Target, _HitHandle, _PreDamageType, _Damage)
AND
_Damage > 0
AND
Real(_Damage, _RealDamage)
AND
RealProduct(_RealDamage, 1.25, _RealAddDamage)
AND
Integer(_RealAddDamage, _FinalDamage)
AND
StringConcatenate("[OdinHUN:Story] Expert Hunter crafted amp: ", _SkillId, _DebugMsg)
THEN
NRD_HitStatusClearDamage(_Target, _HitHandle, _PreDamageType);
NRD_HitStatusAddDamage(_Target, _HitHandle, _PreDamageType, _FinalDamage);
NRD_DebugLog(_DebugMsg);
EXITSECTION

ENDEXITSECTION
